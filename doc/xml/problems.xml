<section id="troubleshooting">
	<title>Common problems</title>
	
	<section id="oracle-problems">
		<title>Oracle Problems</title>

		<section id="oracle-long-problems">
			<title>Error: "Stream has already been closed"</title>
			<para>
				Due to a bug in Oracle's JDBC driver, you cannot retrieve columns with 
				the <literal>LONG</literal> or <literal>LONG RAW</literal> data type if the <literal>DBMS_OUTPUT</literal> 
				package is enabled. 
				In order to be able to display these columns, the support for <literal>DBMS_OUTPUT</literal> 
				has to be switched off using the <link linkend="command-disableout">DISABLEOUT</link> command
				before runnnig a <literal>SELECT</literal> statement that returns <literal>LONG</literal> 
				or <literal>LONG RAW</literal> columns.
			</para>
		</section>
		
		<section id="oracle-blob-problems">
			<title>BLOB support is not working properly</title>
			<para>
				&wb-productname; supports reading and writing BLOB data in 
				various ways. The implementation relies on standard JDBC API calls
				to work properly in the driver. If you experience problems when updating
				BLOB columns (e.g. using the <link linkend="blob-support">enhanced</link> <literal>UPDATE, INSERT</literal>
				syntax or the <link linkend="data-pumper">DataPumper</link>)
				then please check the version of your Oracle JDBC driver. Only 10.x drivers 
				implement the necessary JDBC functions properly. The version of your driver
				is reported in the log file when you make a connection to your Oracle server.
			</para>
		</section>
		
		<section id="oracle-enable-remarks">
			<title>Table and column comments are not displayed</title>
			<para>
				By default Oracle's JDBC driver does not return comments made on columns or tables 
				(<literal>COMMENT ON ..</literal>). Thus your comments will not be shown in the database 
				explorer.
			</para>
			<para>
				To enable the display of column comments, you need to pass the property <literal>remarksReporting</literal>
				to the driver.
			</para>
			<para>
				In the profile dialog, click on the <guibutton>Extended Properties</guibutton> button.
				Add a new property in the following window with the name <literal>remarksReporting</literal>
				and the value <literal>true</literal>. Now close the dialog by clicking on the OK button.
			</para>
			<para>
				Turning on this features slows down the retrieval of table information e.g. in the Database Explorer.
			</para>
			<para>
				When you have comments defined in your Oracle database and use the <link linkend="command-schema-report">WbReport</link>
				command, then you have to enable the remrks reporting, otherwise the comments will not show up in the report.
			</para>
		</section>
		
	</section>
	
	<section id="mysql-problems">
		<title>MySQL Problems</title>
		
		<section id="mysql-select-problems">
			<title>"Operation not allowed" error message</title>
			<para>
				In case you receive an error message "<literal>Operation not allowed after ResultSet closed</literal>"
				please upgrade your JDBC driver to a more recent version. This problem was fixed with the MySQL JDBC
				driver version 3.1. So upgrading to that or any later version will fix this problem.
			</para>
		</section>

		<section id="mysql-zero-date-problems">
			<title>Problems with zero dates with MySQL</title>
			<para>
				MySQL allows the user to store invalid dates in the database (0000-00-00). Since 
				version 3.1 of the JDBC driver, the driver will throw an exception when trying to retrieve
				such an invalid date. This behaviour can be controlled by adding an <link linkend="profile-extended-properties">extended property</link>
				to the connection profile. The property should be named <literal>zeroDateTimeBehavior</literal>. You can
				set this value to either <literal>convertToNull</literal> or to <literal>round</literal>. For details
				see <ulink url="http://dev.mysql.com/doc/refman/4.1/en/connector-j-installing-upgrading.html">the MySQL site</ulink>
			</para>
		</section>
		
	</section>
	
	<section id="mssql-problems">
		<title>SQL Server Problems</title>

		<section id="mssql-cloned-connection">
		  <title>Can't start a cloned connection while in manual transaction mode</title>
		  <para>
		    This error usually occurs in the DbExplorer if an older Microsoft JDBC Driver is used
		    and the connection does not use autocommit mode. There are two ways to fix this problem:
		    <itemizedlist>
		      <listitem>Upgrade to a newer Microsoft driver (e.g. the one for SQL Server 2005)</listitem>
		      <listitem>Enable autocommit in the connection profile</listitem>
		      <listitem>Add the parameter <literal>;SelectMethod=Cursor</literal> to your JDBC URL</listitem>
		    </itemizedlist>
		    This <ulink url="http://support.microsoft.com/?scid=kb;en-us;313181&amp;x=9&amp;y=11">article</ulink>
		    in Microsoft's Knowledgebase gives more information regarding this problem.
		  </para>
		  <para>
		    The possible parameters for the SQL Server 2005 driver are listed 
        <ulink url ="http://msdn2.microsoft.com/en-us/library/ms378988.aspx">here</ulink>
		  </para>
		</section>

		<section id="mssql-locking-problems">
		  <title>Dealing with locking problems</title>
		  <para>
				Microsoft SQL Server (at least up to 2000) does not support concurrent reads and writes
				to the database very well. Especially when using DDL statements, this can lead to
				database locks that can freeze the application. This affects e.g. the display of the tables
				in the DbExplorer.	As the JDBC driver needs to issue a SELECT statement to retrieve the table information,
				this can be blocked by e.g. a non-committed <literal>CREATE ... </literal> statement as
				that will lock the table(s) that store the meta information about tables and views.
		  </para>
			<para>
				Unfortunately there is no real solution to blocking transactions e.g. between a SQL tab and the
				DbExplorer. One (highly discouraged) solution is to run in autocommit mode, the other to have
				only one connection for all tabs (thus all of them share the same transaction an the DbExplorer
				cannot be blocked by a different SQL tab).
			</para>
			<para>
				The Microsoft JDBC Driver supports a connection property called <literal>lockTimeout</literal>.
				It is recommended to set that to 0 (zero) (or a similar low value). If that is done, calls
				to the driver's API will through an error if they encounter a lock rather than waiting
				until the lock is released. The jTDS driver does not support such a property.
			</para>
		</section>

	</section>
	
	<section id="db2-problems">
		<title>DB2 Problems</title>

		<section id="db2-charset">
			<title>"Connection closed" errors</title>
			<para>
				When using the DB2 JDBC drivers it is important that the <literal>charsets.jar</literal> 
				is part of the used JDK (or JRE). Apparently the DB2 JDBC driver needs this library in 
				order to correctly convert the EBCDIC characterset (used in the database) into the 
				Unicode encoding that is used by Java.
				The library <literal>charsets.jar</literal> is usually included in all multi-language
				JDK/JRE installations. 
			</para>
			<para>
				If you experience intermittent "Connection closed" errors when running SQL statements,
				please verify that <literal>charsets.jar</literal> is part of your JDK/JRE installation.
				This file is usually installed in <literal>jre\lib\charsets.jar</literal>.
			</para>
		</section>

	</section>

</section>
	
