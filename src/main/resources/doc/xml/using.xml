<section id="using">
	<title>Using &wb-productname;</title>

	<section id="displaying-help">
		<title>Displaying help</title>
		<para>
			You have two possibilities to display help for &wb-productname;: a HTML a PDF version of the manual.
		</para>
		<para>
			The HTML help is available through the menu item
			<menuchoice><guimenu>Help</guimenu><guimenuitem>Contents</guimenuitem></menuchoice>
			It is expected that the HTML manual is stored in a directory called <literal>manual</literal>
			in the same directory where <literal>sqlworkbench.jar</literal> is located. This is automatically the case
			when you extract the distribution archive with sub-directories.
		</para>
		<para>
			You can choose to display a single-page version of the HTML help (easier to search) or a multi-page
			version of the help that is easier to navigate. This can be changed in the options dialog, that is
			accessible from <menuchoice><guimenu>Tools</guimenu><guimenuitem>Option</guimenuitem></menuchoice>.
		</para>
		<para>
			The PDF manual can be displayed by selecting <menuchoice><guimenu>Help</guimenu><guimenuitem>Manual</guimenuitem></menuchoice>.
			In order to be able to display the PDF manual, you need to define the path to the executable for the PDF
			reader in the <link linkend="options-general">General options</link> section of the options dialog.
		</para>
		<para>
			The file <literal>SQLWorkbench-Manual.pdf</literal> must be available in the
			directory where <literal>sqlworkbench.jar</literal> is located.
		</para>

    <para>
      When connected to a database, the menu item
      <menuchoice><guimenu>Help</guimenu><guimenuitem>DBMS Manual</guimenuitem></menuchoice> will display the
      online manual for the current DBMS (if there is one). Where possible the link will display the manual that
      corresponds to the version of the current connection.
    </para>
    <para>
      The URL that is used to display the manual can be <link linkend="db-settings-online-manual">changed</link> in the
      configuration file <link linkend="settings"><literal>workbench.settings</literal></link>.
    </para>

	</section>

	<section id="window-sizes">
		<title>Resizing windows</title>
		<para>
      Every window that is opened by &wb-productname; for the first time is
      displayed with a default size. In certain cases it can happen that not
      all labels are readable or all controls are visible on the window. This can
      happen, e.g. when a large default font is selected (or defined through the
      look and feel).
    </para>
    <para>
      Every window in &wb-productname; can be resized and will remember its
      size. So in case not everything is readable on a dialog, just resize the
      window so that the missing parts become visible, and that size will
      be kept for the future.
    </para>
  </section>

	<section id="executing-sql-statements">
		<title>Executing SQL statements</title>

		<section id="execute-sql-commands">
			<title>Control the statement to be executed</title>

			<para>There are three different ways to execute a SQL command</para>

			<para><emphasis role="bold">Execute the selected text</emphasis></para>
			<para>
				When you press <keycap>Ctrl-E</keycap> or select
				<menuchoice><guimenu>SQL</guimenu><guimenuitem>Execute selected</guimenuitem></menuchoice>
				the currently selected text will be send to the DBMS for execution. If no text is
				selected the complete contents of the editor will be send to the database.
			</para>

			<para id="execute-current"><emphasis role="bold">Execute current statement</emphasis></para>
			<para>
				When you press <keycap>Ctrl-Enter</keycap> or select
				<menuchoice><guimenu>SQL</guimenu><guimenuitem>Execute current</guimenuitem></menuchoice>
				the current statement will be executed. The "current" statement will be the text
				between the next delimiter before the current cursor position and the delimiter
				after the cursor position.
			</para>

			<para>Example (| indicating the cursor position)</para>
			<programlisting>SELECT firstname, lastname FROM person;

DELETE FROM person| WHERE lastname = 'Dent';
COMMIT;</programlisting>

			<para>When pressing Ctrl-Enter the <literal>DELETE</literal> statement will be exectuted</para>

      <para>
        You can <link linkend="options-currentline-current-stmt">configure the editor</link> to use the statement that is defined by
        the current <emphasis>line</emphasis> rather than
        the cursor location when using <guimenuitem>Execute current</guimenuitem>.
      </para>

      <para>
        Consider the following editor contents:
			<programlisting>SELECT firstname, lastname FROM person; |
DELETE FROM person WHERE lastname = 'Dent';
COMMIT;</programlisting>
        If the option to use the current line is <emphasis role="bold">disabled</emphasis> and the cursor is located after the semicolon in the third line,
        <guimenuitem>Execute current</guimenuitem> will execute the <literal>SELECT</literal> statement because the cursor
        is logically located in the statement after the <literal>select</literal>.
      </para>
      <para>
        If that option is <emphasis role="bold">enabled</emphasis> and the cursor is located after the semicolon in the third line,
        <guimenuitem>Execute current</guimenuitem> will execute the <literal>DELETE</literal> statement because the statement in the current line
        is the <literal>select</literal> statement. If there are multiple SQL statements in the current line, the first statement will be executed.
      </para>

			<para>
				You can configure &wb-productname; to automatically jump to the next statement,
				after executing the current statement. Simply select <menuchoice><guimenu>SQL</guimenu><guimenuitem>Settings</guimenuitem><guimenuitem>Auto advance to next</guimenuitem></menuchoice>
				The check mark next to the menu item indicates if this option is enabled.
				This option can also be changed through the <link linkend="options-autojump-statement">Options dialog</link>
			</para>

			<para><emphasis role="bold">Execute All</emphasis></para>
			<para>
				If you want to execute the complete text in the editor regardless
				of the current selection, use the <guimenuitem>Execute all</guimenuitem> command.
				Either by pressing <keycap>Ctrl-Shift-E</keycap> or selecting
				<menuchoice><guimenu>SQL</guimenu><guimenuitem>Execute All</guimenuitem></menuchoice>
			</para>

			<para>
				When executing all statements in the editor you have to delimit each statement, so
				that &wb-productname; can identify each statement. If your statements are not delimited
				using a semicolon, the whole editor text is sent as a single statement to the database.
				Some DBMS support this (e.g. Microsoft SQL Server), but most DBMS will throw an error
				in that case.
			</para>

			<para>A script with two statements could look like this:</para>
			<programlisting>UPDATE person SET numheads = 2 WHERE name='Beeblebrox';
COMMIT;</programlisting>

			<para>or:</para>
			<programlisting>DELETE FROM person;
DELETE FROM address;
COMMIT;

INSERT INTO person
(id, firstname, lastname)
VALUES
(1, 'Arthur', 'Dent');

INSERT INTO person
(id, firstname, lastname)
VALUES
(4, 'Mary', 'Moviestar');

INSERT INTO person
(id, firstname, lastname)
VALUES
(2, 'Zaphod', 'Beeblebrox');

INSERT INTO person
(id, firstname, lastname)
VALUES
(3, 'Tricia', 'McMillian');

COMMIT;
</programlisting>
			<para>
				You can specifiy an <link linkend="options-alternate-delimiter">alternate delimiter</link>
				that can be used instead of the semicolon. See the description
				of the <link linkend="understand-alternate-delim">alternate delimiter</link> for details.
				This is also needed when running DDL scripts (e.g. for stored procedures) that contain
				semicolons that should not delimit the statements.
			</para>

			<para>
				As long as at least one statement is running the title of the main window
				will be prefixed with the &raquo; sign. Even if the main window is minimized
				you can still see if a statement is running by looking at the window title.
			</para>

			<para>
				You can use variables in your SQL statements that are replaced when
				the statement is executed. Details on how to use variables can be found in
				the chapter <xref linkend="using-variables"/>.
			</para>

			<para>
				JDBC drivers do not support multi-threaded execution of statements on the same physical
				connection. If you want to run two statements at the same time, you will need to enable the
				<link linkend="profiles">Separate connection per tab</link> option in your connection profile.
				In this case &wb-productname; will open a physical connection for each SQL tab, so that
				statements in the different tabs can run concurrently.
			</para>

			<section id="statement-history">
				<title>Statement history</title>

				<para>
					When executing a statement the contents of the editor is put
					into an internal buffer together with the information about the
					text selection and the cursor position. Even when you select a part of the current
					text and execute that statement, the whole text is stored in the history buffer together
					with the selection information. When you select and execute different parts of the text
					and then move through the history you will see the selection change for each history
					entry.
				</para>
				<para>
					The previous statement can be
					recalled by pressing <keycap>Alt-Left</keycap> or choosing
					<menuchoice><guimenu>SQL</guimenu><guimenuitem>Previous Statement</guimenuitem></menuchoice>
					statement from the menu. Once the previous statement(s) have been
					recalled the next statement can be shown using <keycap>Alt-Right</keycap> or choosing
					<menuchoice><guimenu>SQL</guimenu><guimenuitem>Next Statement</guimenuitem></menuchoice>
					from the menu. This is similar to browsing through the history of a web browser.
				</para>
				<para>
					You can clear the statement history for the current tab, but selecting
					<menuchoice><guimenu>SQL</guimenu><guimenuitem>Clear history</guimenuitem></menuchoice>
				</para>
				<note>
					<para>
					When you clear the content of the editor (e.g. by selecting the whole text
					and then pressing the <keycap>Del</keycap> key) this will not clear the statement
					history. When you load the associated workspace the next time, the editor will
					automatically display the last statement from the history. You need to manually
					clear the statement history, if you want an empty editor the next time you
					load the workspace.
					</para>
				</note>
			</section>

		</section>
	</section>

	<section id="display-result">
		<title>Displaying results</title>

		<para>
			When you run SQL statements that produce a result (such as a <literal>SELECT</literal>
			statement) these results will be displayed in the lower pane of the window, next to
			the message panel. For each result that is returned from the server, one tab
			(labeled "Result") will be created. If you select and execute three <literal>SELECT</literal>
			statements, the lower pane will show three result tabs and the message tab. If your
			statement(s) did not produce any result, only the messages tab will be displayed.
		</para>

    <caution>
      <para>
        &wb-productname; will read all rows returned by your statement into memory. When
        retrieving large results you might run out of memory. To adjust the memory available
        to &wb-productname; please refer to <link linkend="install-increase-memory">this chapter</link>.
      </para>
    </caution>

		<para id="append-results">
			When you run a SQL statement, the current results will be cleared and
			replaced by the new results. You can turn this off by selecting
			<menuchoice><guimenu>SQL</guimenu><guimenuitem>Settings</guimenuitem><guimenuitem>Append new results</guimenuitem></menuchoice>.
			Every result that is retrieved while this option is turned on, will be added to the
			set of result tabs, until you de-select this option. This can also be
			toggled using the button (<guibutton><guiicon><inlinegraphic valign="bottom" fileref="@IMAGE_DIR@/append_result16.png" format="PNG"/></guiicon></guibutton>)
      on the toolbar. Additional result tabs can be closed using
			<menuchoice><guimenu>Data</guimenu><guimenuitem>Close result</guimenuitem></menuchoice>.
      You can configure the default behavior for new editor tabs in the <link linkend="options-append-results-default">options dialog</link>.
		</para>

		<para>
			You can also run stored procedures that return result sets. These result will be
			displayed in the same way. For DBMS's that support multiple result sets from
			a single stored procedure (e.g. Microsoft SQL Server), one result tab will be displayed
			for each result returned.
		</para>

    <section id="max-rows-display">
      <title>Limiting result sizes</title>
      <para>
        To prevent retrieving an large amount of rows (and possibly running out of memory), the maximum number of rows
        that are retrieved can be defined for each SQL panel in the "Max. Rows" input field of the status bar. This
        value will be stored in the <link linkend="using-workspaces">workspace</link> that is associated with the
        connection profile.
      </para>
      <para>
        A default value that will be used for newly opened SQL tabs can be defined in the
        <link linkend="options-def-max-rows">options dialog</link>.
      </para>
    </section>

		<section id="display-multiline">
			<title>Displaying values with embedded newlines</title>
			<para>
				Data from <literal>VARCHAR</literal> or <literal>CHAR</literal> columns is
				displayed as a single-line if the column's max. size is below 250 characters.
				If you have data in smaller columns that contains newlines (line breaks) and you want
				to display directly in the result set, please adjust the limit to match your needs.
				The limit can be changed in the <link linkend="options-multiline">Data Display Options</link>.
			</para>
		</section>

		<section id="using-result-names">
			<title>Naming result tabs</title>
      <para>
        There are two ways to assign a name to the result tab of a query:
        <itemizedlist>
          <listitem>
            <simpara>
              By specifying the annotation <literal>@WbResult</literal>.
              For details please see the chapter about <link linkend="annotations">annotations</link>
            </simpara>
          </listitem>
					<listitem>
            <simpara>
              You can automatically use the first table name from a <literal>SELECT</literal> statement to be used
              for the result name in the <link linkend="option-result-name">Data display options</link>.
            </simpara>
          </listitem>
        </itemizedlist>
      </para>
		</section>

</section>

	<section id="blob-support" xreflabel="BLOB support">

		<title>Dealing with BLOB and CLOB columns</title>

		<para>
			&wb-productname; supports reading and writing <literal>BLOB</literal> (Binary Large OBject)
			or <literal>CLOB</literal> (Character Large OBject) columns from and to external files.
			BLOB clumns are sometimes also referred to as binary data. CLOB columns
			are sometimes also referred to as <literal>LONG VARCHAR</literal>. The exact data type
			depends on the DBMS used.
		</para>

		<para>
			To insert and update LOB columns the usual <literal>INSERT</literal> and
			<literal>UPDATE</literal> statements can be used by using a special
			placeholder to define the source for the LOB data. When updating the
			LOB column, a different placeholder for BLOB and CLOB columns has to be used as
			the process of reading and sending the data is different for binary and character
			data.
		</para>

		<note><para>
			When working with Oracle, only the 10g driver supports the standard JDBC calls used by &wb-productname;
			to read and write the LOB data. Earlier drivers will not work as described in this chapter.
		</para></note>

		<section id="using-update-blob">
			<title>Updating BLOB data through SQL</title>

			<para>
				To update a BLOB (or binary) column, use the placeholder
				<literal>{$blobfile=path_to_file}</literal> in the place where the
				actual value has to occur in the <literal>INSERT</literal> or <literal>UPDATE</literal>
				statement:
			</para>

			<programlisting>UPDATE theTable
  SET blob_col = {$blobfile=c:/data/image.bmp}
WHERE id=24;</programlisting>

			<para>
				&wb-productname; will rewrite the UPDATE statement and send the contents
				of the file located in <literal>c:/data/image.bmp</literal> to the database. The syntax
				for inserting BLOB data is similar. Note that some DBMS might not allow you to
				supply a value for the blob column during an insert. In this case you need to
				first insert the row without the blob column, then use an <literal>UPDATE</literal>
				to send the blob data. You should make sure to update only one row by specifying an
				appropriate <literal>WHERE</literal> clause.
			</para>

			<programlisting>INSERT INTO theTable
(id, blob_col)
VALUES
(42,{$blobfile=c:/data/image.bmp});</programlisting>

			<para>
				This will create a new record with id=42 and the content of <literal>c:/data/image.bmp</literal> in
				the column <literal>blob_col</literal>
			</para>

		</section>

		<section id="using-update-clob">
			<title>Updating CLOB data through SQL</title>
			<para>
				The process of updating or inserting <literal>CLOB</literal> data is identical to the
				process for <literal>BLOB</literal> data. The only difference is in the syntax of
				the placeholder used to specify the source file. Firstly, the placeholder has
				to start with <literal>{$clobfile=</literal> and can optionally contain
				a parameter to define the encoding of the source file.
			</para>
			<programlisting>UPDATE theTable
  SET clob_col = {$clobfile=c:/data/manual.html encoding=utf8}
WHERE id=42;</programlisting>
			<para>
				If you ommit the encoding parameter, &wb-productname; will leave the data conversion
				to the JDBC driver (technically, it will use the <literal>PreapredStatement.setAsciiStream()</literal> method
				whereas with an encoding it will use the <literal>PreparedStatement.setCharacterStream()</literal> method).
			</para>

			<note><para>
				The format of the <literal>{$clobfile=}</literal> or <literal>{$blobfile=}</literal> parameter
				has to be entered exactly as described here. You may not put e.g. spaces before or after
				the equal sign or the braces. If you do this, &wb-productname; will not recognize the parameter and
				will pass the statement "as is" to the JDBC driver.
			</para></note>

		</section>

		<section id="read-blob">
			<title>Saving BLOB data to a file using SQL</title>

			<para>
				To save the data stored in a BLOB column, the command <link linkend="command-selectblob">WbSelectBlob</link>
				can be used. The syntax of this command is similar to the regular <literal>SELECT</literal> command
				except that a target file has to be specified where the read data should be stored.
			</para>

			<para>
				You can also use the <link linkend="command-export">WbExport</link> command to export
				data. The contents of the BLOB columns will be saved into separate files. This works for both
				export formats (XML and Text).
			</para>

		</section>

		<section id="update-blob-editmode">
			<title>BLOB data in the result set</title>
			<para>
				When the result of your <literal>SELECT</literal> query contains BLOB columns,
				they will be displayed as <literal>(BLOB)</literal>
				together with a button.
				When you click on the button a dialog will be displayed allowing
				you to save the data to a file, view the data as text (using the selected encoding),
				display the blob as an image or display a hex view of the blob.
			</para>
			<para>
				When displaying the BLOB content as a text, you can edit the text. When saving
				the data, the entered text will be converted to raw data using the selected encoding.
			</para>
			<para>
				The window will also let you open the contents of the BLOB data with a predefined
				<link linkend="options-external-tools">external tool</link>. The tools that
				are defined in the options dialog can be selected from a drop down. To open
				the BLOB content with one of the tools, select the tool from the drop down list,
				then click on the button <guibutton>Open with</guibutton> next to the external
				tools drop down. &wb-productname; will then retrieve the BLOB data from the server,
				store it in a temporary file on your hard disk, and run the selected application,
				passing the temporary file as a parameter.
			</para>
			<para>
				From within this information dialog, you can also upload a file to be stored
				in that BLOB column. The file contents will not be sent to the database server
				until you actually save the changes to your result set (this is the same for all
				changes you make directly in the result set, for details please refer
				to <xref linkend="edit-data"/>)
			</para>
			<note><para>
				When using the upload function in the BLOB info dialog, &wb-productname;
				will use the file content for any subsequent display of the binary data or the
				the size information in the information dialog.
				You will need to re-retrieve the data, in order to use
				the blob data from the server.
			</para></note>
		</section>

	</section>

	<section id="sql-performance">
		<title>Performance tuning when executing SQL</title>
		<para>
			There are some configuration settings that affect the performance
			of &wb-productname;. On slow computers it is recommended to turn off
			the usage of the <link linkend="option-animated-icon">animated icon</link>
			as the indicator for a running statement.
		</para>
		<para>
			When running large scripts, the feedback which statement is executed
			can also slow down the execution. It is recommended to either turn off
			the feedback using <link linkend="command-wbfeedback">WBFEEDBACK OFF</link> or by
			<link linkend="options-consolidate-log">consolidating the script log</link>
		</para>
		<para>
			When running <link linkend="command-import">imports</link> or
			<link linkend="command-export">exports</link> it is recommended to turn
			off the progress display in the statusbar that shows the current row
			that is imported/exported because this will slow down the process as
			well. In both cases you can use <literal>-showProgress</literal>
			to turn off the display (or set it to a high number such as 1000) in
			order to reduce the overhead caused by updating the screen.
		</para>
	</section>

	<section id="using-workspaces">
		<title>Using workspaces</title>

		<para>
			The complete history for all editor tabs is saved and loaded
			into one file, called a workspace. These workspaces can be saved and loaded
			to restore a specific editing context.
			You can assign a saved workspace to a <link linkend="profiles">connection profile</link>.
			When the connection is established, the workspace is loaded into &wb-productname;. Using this feature
			you can maintain a completely different set of statements for different connections.
		</para>

		<para>
			If you do not assign a workspace to a connection profile, a workspace with the
			name <filename>Default.wksp</filename> will be used for storing the statement history.
			This default workspace is shared between <emphasis role="bold">all</emphasis> profiles
			that have no workspace assigned.
		</para>

		<para>
			To save the current SQL statement history and the visible tabs into a new workspace,
			select <menuchoice><guimenu>Workspace</guimenu><guimenuitem>Save Workspace as....</guimenuitem></menuchoice>
		</para>

		<para>
			The default file extension for workspaces is <filename>wksp</filename>.
		</para>

		<para>
			Once you have loaded a workspace, you can save it with
			<menuchoice><guimenu>Workspace</guimenu><guimenuitem>Save Workspace</guimenuitem></menuchoice>.
			The current workspace is automatically
			saved, when you exit &wb-productname;.
		</para>

		<para>
			An existing workspace can be loaded with
			<menuchoice><guimenu>Workspace</guimenu><guimenuitem>Load Workspace</guimenuitem></menuchoice>
		</para>

		<para>
			If you have an external file open in one of the editor tabs, the filename itself
			will be stored in workspace. When loading the workspace &wb-productname; will try to load
			the external file again. If the file does not exist, the last history entry from the saved
			history for that tab will be displayed.
		</para>
		<para>
			The workspace file itself is a normal ZIP file, which contains one file with the
			statement history for each tab. The individual files can be extracted from the workspace
			using your favorite UNZIP tool.
		</para>

	</section>

	<section id="manage-scripts">
		<title>Saving and loading SQL scripts</title>

		<para>
			The text from the current editor can be saved to an external file,
			by choosing <menuchoice><guimenu>File</guimenu><guimenuitem>Save</guimenuitem></menuchoice> or
			<menuchoice><guimenu>File</guimenu><guimenuitem>Save as</guimenuitem></menuchoice>. The filename for the
			current editor will be remembered. To close the current file, select <menuchoice><guimenu>File</guimenu><guimenuitem>Discard file</guimenuitem></menuchoice>
			<keycap>(Ctrl-F4)</keycap> or use the context menu on the tab label itself.
		</para>

		<note><para>
			Detaching a file from the editor will remove the text from editor as well.
			If you only want to detach the filename from the editor
			but keep the text, then press <keycap>Ctrl-Shift-F4</keycap> or hold down the <keycap>Shift</keycap> key
			while selecting the Discard menu item.
		</para></note>

		<para>
			When you load a SQL script and execute the statements, be aware that due to the history management
			in &wb-productname; the content of the external file will be placed into the history buffer. If you load
			large files, this might lead to massive memory consumption. Currently only the <emphasis>number</emphasis> of
			statements put into the history can be controlled, but not the total size of the history itself. You can prevent
      files from being put into the history by unchecking the option "Files in history" in the Editor section
      of the <link linkend="options-files-in-history">options dialog</link>.
		</para>

	</section>

	<section id="display-object-info">
		<title>Displaying the structure of tables</title>
    <para>
      The command <link linkend="command-desc"><literal>describe</literal></link> can be used to display the structure of a view or table.
      You can also display information about the database object at the cursor by using
      <menuchoice><guimenu>SQL</guimenu><guimenuitem>Object info</guimenuitem></menuchoice>. This function is also available
      in the context menu of the editor.
    </para>
    <para>
      When the menu item is invoked using the mouse, holding down the <keycap>CTRL</keycap> key
      will return dependent object information as well (e.g. indexes, foreign keys).
    </para>
    <para>
      You can configure this function to always include dependent objects by
      <link linkend="manual-setting-objectinfo-dependent">adding a configuration property</link>.
    </para>
  </section>

	<section id="server-messages">
		<title>Viewing server messages</title>

		<section id="server-msg-pg">
			<title>PostgreSQL</title>
			<para>
				PostgreSQL supports sending of messages to the client using the <literal>RAISE</literal> statement in PL/pgSQL.
        The following function will display a result set (with the number 42) and the message area will contain the
        message <emphasis>Thinking hard...</emphasis>
			</para>
      <programlisting>CREATE OR REPLACE FUNCTION the_answer()
  RETURNS integer
  LANGUAGE plpgsql
AS
$body$
BEGIN
  RAISE NOTICE 'Thinking hard...';
  RETURN 42;
END;
$body$
</programlisting>
		</section>

		<section id="server-msg-ora">
			<title>Oracle</title>
			<para>
				For Oracle the <literal>DBMS_OUTPUT</literal> package is supported. Support for this
				package can be turned on with the <xref linkend="command-dbms-output"/> command.
				If this support is not turned on, the messages will not be displayed. This is the same
				as using the <literal>SET SERVEROUTPUT ON</literal> command in SQL*Plus.
			</para>
			<para>
				If you want to turn on support for <literal>DBMS_OUTPUT</literal> automatically when
				connecting to an Oracle database, you can put the <literal>set serveroutput on</literal> command
				into the <link linkend="profile-connect-scripts">pre-connect</link> script.
			</para>
			<para>
				Any message "printed" with <literal>DBMS_OUTPUT.put_line()</literal> will
        be displayed in the message part <emphasis>after</emphasis> the SQL command has finished. Please
				refer to the Oracle documentation if you want to learn more about the
				<literal>DBMS_OUTPUT</literal> package.
			</para>

			<programlisting>dbms_output.put_line("The answer is 42");</programlisting>
			<para>
				Once the command has finished, the following will be displayed in the
				<literal>Messages</literal> tab.
			</para>

			<programlisting>The answer is 42</programlisting>

		</section>

		<section id="server-msg-mssql">
			<title>MS SQL Server</title>
			<para>
				For MS SQL Server, any message written with the <literal>PRINT</literal>
				command will be displayed in the <literal>Messages</literal> tab after the
				SQL command has finished. The <literal>PRINT</literal> command is usually
				used in stored procedures for logging purposes, but it can also be used
				as a command on its own:
			</para>

			<programlisting>PRINT "Deleting records...";
DELETE from my_table WHERE value = 42;
PRINT "Done."</programlisting>

			<para>
				This will execute the <literal>DELETE</literal>. Once this script has
				finished, the <literal>Messages</literal> tab will contain the text:
			</para>

			<programlisting>Deleting records...
Done.</programlisting>

      <para>
        Due to the way the JDBC API works, the messages are only show <emphasis>after</emphasis> the statement
        has finished (this is different to e.g. SQL Server Management Studio where the messages are displayed
        as soon as <literal>PRINT</literal> is called, even when the overall script or procedure is still running.
      </para>

		</section>

		<section id="server-msg-other">
			<title>Other database systems</title>
			<para>
				If your DBMS supports something similar, please let me know. I will try
				to implement it - provided I have free access to the DBMS. Please send your
				request to <email>support@sql-workbench.net</email>.
			</para>
		</section>

	</section>

	<section id="edit-data" xreflabel="Editing the data">
		<title>Editing data</title>

		<para>
			Once the data has been retrieved from the database, it can be
			edited directly in the result set. &wb-productname; assumes that enough
			columns have been retrieved from the table so that at a unique
			identifier is available to identify the rows to be updated.
		</para>

		<para>
			If you have primary keys defined for the underlying tables, those primary key columns will be used for the
			<literal>WHERE</literal> statements for <literal>UPDATE</literal> and <literal>DELETE</literal>.
			If no primary key is found, the unique indexes for the table will be retrieved. The first unique index
      found that only consists of columns defined as NOT NULL will be used.
    </para>
    <para>
      If no PK or unique index can be found, the custom <link linkend="options-pkmapping">PK Mapping</link> will be checked.
      If still no PK columns can be found, you will be prompted to select
			the key columns based on the current result set.
		</para>

    <important>
      <para>
        The changes (modified, new or deleted rows) will not be saved to the database until
        you choose <menuchoice><guimenu>Data</guimenu><guimenuitem>Save Changes to Database</guimenuitem></menuchoice>.
      </para>
    </important>

    <para>
			If the update is successful (no database errors) a <literal>COMMIT</literal> will automatically be
			sent to the database (if <link linkend="profile-autocommit">autocommit</link> is turned off).
    </para>

		<para>
			If your <literal>SELECT</literal> was based
			on more than one table, you will be prompted to specify which table should be	updated.
      It cannot be detected reliably which column belongs to which of the tables from the select statement.
      When updating a result from multiple tables, only columns from the chose update table should be changed, otherwise
      incorrect SQL statements will be generated.
    </para>
    <para>
      If no primary (or unique) key can be found for the update table, you will be prompted to select the
			columns that should be used to uniquely identify a row in the update table.
		</para>

		<para>
			If an error is reported during the update, a <literal>ROLLBACK</literal> will automatically be sent to the database.
      The <literal>COMMIT</literal> or <literal>ROLLBACK</literal> will only be sent if <link linkend="profile-autocommit">autocommit</link>
      is turned off.
		</para>

		<para>
			Columns containing BLOB data will be displayed with a <guibutton>...</guibutton> button.
			By clicking on that button, you can view the blob data, save it to a file or upload
			the content of a file to the DBMS. Please refer to <xref linkend="blob-support"/>
			for details.
		</para>

		<para>
			When editing, &wb-productname; will highlight columns that are defined as <literal>NOT NULL</literal>
			in the database. You can turn this feature off, or change the color that is used in the
			<link linkend="options-required-field-color">options dialog</link>.
		</para>

		<note><para>
			When editing date, timestamp or time fields, the format specified
			in the <link linkend="options-date-format">options dialog</link> is used
			for parsing the entered value and converting that into the internal representation
			of a date. The value entered must match the format defined there.
		</para></note>

		<para id="editing-date-keywords">
			If you want to input the current date and time you can use <literal>now, today, sysdate,
			current_timestamp, current_date</literal> instead. This will then use the current
			date &amp; time and will convert this to the approriate data type for that column.
			e.g. <literal>now</literal> will be converted to the current time for a time column,
			the current date for a date column and the current date/time for a timestamp column.
			These keywords also work when importing text files using <link linkend="command-import">WbImport</link>
			or importing a text file into the result set. The exact keywords that are recognized can be
			configure in the <link linkend="settings-date-keywords">settings file</link>
		</para>

    <para id="edit-set-null">
      If the option <link linkend="profile-empty-string-is-null">Empty String is NULL</link> is disabled for the current connection profile, you can
      still set a column's value to null when editing it. To do this, double click the current value, so that you can
      edit it. In the context menu (right mouse button) the option "Set to NULL" is available. This will clear the
      value and set it to <literal>NULL</literal>. You can assign a shortcut to this action, but the shortcut will only
      be active when editing a value inside a column.
    </para>

	</section>

	<section id="edit-data-delete">
		<title>Deleting rows from the result</title>
    <indexterm><primary>Editing data</primary><secondary>deleting rows</secondary></indexterm>
		<para>
			To delete a row from the result, select <menuchoice><guimenu>Data</guimenu><guimenuitem>Delete Row</guimenuitem></menuchoice>
			from the menu. This will remove the currently selected row(s) from the result and will
			mark them for deletion once the changes are saved. No foreign key checks will be done
			when using this option.
		</para>
		<para>
			The generated <literal>DELETE</literal> statements will fail if the deleted row(s) are still
			referenced by another table. In that case, you can use <guimenuitem>Delete With Dependencies</guimenuitem>.
		</para>
	</section>

	<section id="sorting-data">
		<title>Sorting the result</title>
		<para>
			The result will be displayed in the order returned by the DBMS (i.e.
			if you use an <literal>ORDER BY</literal> in your <literal>SELECT</literal>
			the display will be displayed as sorted by the DBMS).
		</para>
		<para>
			You can change the sorting of the displayed data by clicking on the header
			of the column that should be used for sorting. After the first click the data will be
			sorted ascending (lower values at the top). If you click on the column again
			the sort order will be reversed. The sort order will be indicated by a little
			triangle in the column header. If the triangle points upward the data is sorted
			ascending, if it points downward the data is sorted descending.
			Clicking on a column will remove any previous sorting (including the secondary
			columns) and apply the new sorting.
		</para>
		<para>
			If you want to sort by more than one column, hold down the <keycap>Ctrl</keycap> key
			will clicking on the (second) header. The initial sort order is ascending for that additional column.
			To switch the sort order hold down the <keycap>Ctrl</keycap> key and click on the column
			header again. The sort order for all "secondary" sort columns will be indicated
			with a slightly smaller triangle than the one for the primary sort column.
		</para>
		<para>
			To define a different secondary sort column, you first have to remove
			the current secondary column. This can be done by holding down the <keycap>Shift</keycap> key
			and clicking on the secondary column again. Note that the data will not be resorted. Once you
			have removed the secondary column, you can define a different secondary sort column.
		</para>
		<para>
			By default &wb-productname; will use "ASCII" sorting which is case-sensitive and will not
			sort special characters according to your language. You can change the locale that is used
			for sorting data in the <link linkend="option-sort-collator">options dialog</link> under the category
			"Data Display". Sorting using a locale is a bit slower than "ASCII" sorting.
		</para>

	</section>

	<section id="filter-data">
		<title>Filtering the result</title>

		<para>
			Once the data has been retrieved from the server it can be filtered
			without re-retrieving it. You can define the filter in two
			ways: either select the filter columns and their filter values manually, or create
			a filter from the currently selected values in the result set.
		</para>

    <para>
      <note>
        The filter is applied on the data that is retrieved from the database. The data will <emphasis role="bold">not</emphasis>
        be reloaded from the database when you define a filter.
      </note>
    </para>

		<section id="filter-manual">
			<title>Defining a filter manually</title>

			<para>
				To define a filter, click on the <literal>Filter</literal> button (<guiicon><inlinegraphic width="16" depth="16" fileref="@IMAGE_DIR@/filter16.png" format="PNG"/></guiicon>)
				in the toolbar or select <menuchoice><guimenu>Data</guimenu><guimenuitem>Filter data</guimenuitem></menuchoice>.
				A dialog will appear where you can define a filter for the current result set. Each line
				in the filter dialog defines an expression that will be applied to the column selected
				in the first drop down. If you select <literal>*</literal> for the column, the filter
				condition will be applied to all columns of the result set.
			</para>

      <para>
        <important>
          The value expression for a column does not accept SQL expressions! You can only compare the column
          to a constant, not to the result of a SQL function (such as <literal>CURRENT_DATE</literal> or <literal>now()</literal>)
          If you need this kind of filter, you have to use a SQL statement with the approriate <literal>WHERE</literal> condition.
        </important>
      </para>

			<para>
				To add a multi-column expression, press the <guibutton>More</guibutton> button, to create
				a new line. To remove a column expression from the filter, click the <literal>Remove</literal>
				(<guibutton><guiicon><inlinegraphic width="16" depth="16" fileref="@IMAGE_DIR@/delete16.png" format="PNG"/></guiicon></guibutton>) button.
				For character based column data, you can select to ignore the case of the column's data
				when applying the expression, i.e. when <literal>Ignore case</literal> is selected, the
				expression <literal>'NAME = arthur'</literal> will match the column value '<literal>Arthur</literal>',
				and '<literal>ARTHUR</literal>'.
			</para>

			<para>
				By default, the column expressions are combined with an <literal>OR</literal>, i.e.
				that a row will be displayed if at least one of the column expressions evaluates
				to true. If you want to view only rows where <emphasis role="bold">all</emphasis>
				column expressions must match, select the <literal>AND</literal> radio button
				at the top of the dialog.
			</para>

			<para>
				Once you have saved a filter to an external file, this filter will be available
				in the pick list, next to the filter icon. The list will show the last filters
				that were saved. The number of items displayed in this drop down can be
				controlled in the <link linkend="filter-picklist-size">settings file</link>.
			</para>

		</section>

		<section id="filter-quick-filter">
			<title>Defining a filter from the selection</title>

			<para>
				You can also quickly filter the data based on the value(s) of the currenlty
				selected column(s). To apply the filter, select the column values by which
				you want to filter then click on the <literal>Quickfilter</literal> button
				(<guibutton><guiicon><inlinegraphic width="16" depth="16" fileref="@IMAGE_DIR@/colfilter16.png" format="PNG"/></guiicon></guibutton>)
				in the toolbar or select
				<menuchoice><guimenu>Data</guimenu><guimenuitem>Filter by value</guimenuitem></menuchoice>
				from the menu bar.
			</para>

			<para>
				Using the <keycap>Alt</keycap> key you can select individual columns of one or
				more rows. Together with the <keycap>Ctrl</keycap> key you can select e.g. the first,
				third and fourth column. You can also select the e.g. second column of the first, second
				and fifth row.
			</para>

			<para>
				Whether the quick filter is available depends on the selected rows
				and columns. It will be enabled when:
				<itemizedlist>
					<listitem><simpara>You have selected one or more columns in a single row</simpara></listitem>
					<listitem><simpara>You have selected one column in multiple rows</simpara></listitem>
				</itemizedlist>
			</para>

			<para>
				If only a single row is selected, the quick filter will use
				the values of the selected columns combined with <literal>AND</literal> to
				define the filter (e.g. username = 'Bob' AND job = 'Clerk'). Which columns
				are used depends on the way you select the row and columns.
				If the whole row in the result is selected, the quick filter will use the
				value of the focused column (the one with the yellow rectangle), otherwise
				the individually selected columns will be used.
			</para>

			<para>
				If you select a single column in multiple rows, this will
				create a filter for that column, but with the values will be combined with
				<literal>OR</literal> (e.g. name = 'Dent' OR name = 'Prefect').
				The quick filter will not be available if you select more than one column in
				multiple rows.
			</para>
			<para>
				Once you have applied a quick filter, you can use the regular filter definition
				dialog to check the definition of the filter or to further modify it.
			</para>
		</section>

	</section>

  <section id="using-procs">
    <title>Running stored procedures</title>
    <para>
      Stored procedures can be executed by using the &wb-productname; command <literal>WbCall</literal>
      which replaces the standard commands available for the DBMS (e.g. <literal>CALL</literal> or
      <literal>EXECUTE</literal>). By using a special command, additional checks can be
      carried out by &wb-productname;. This is especially necessary when dealing with OUT parameters
      or REF CURSORS.
    </para>
    <para>
      The simplest way to run a stored procedure is:
    </para>
    <programlisting>WbCall my_proc();</programlisting>
    <para>
      When using Microsoft SQL Server, WbCall is not necessary as long as the stored procedure does not
      have OUT or REF CURSOR parameters. So with SQL Server you can simply write:
    </para>
    <programlisting>sp_who2;</programlisting>
    <para>
      To run the stored procedure <literal>sp_who2</literal> and to display it's results.
    </para>
    <para>
      For more details on running a stored procedure with <literal>OUT</literal> parameters or <literal>REF CURSORS</literal>
      please refer to the description of the <link linkend="command-wbcall">WbCall</link> command.
    </para>

  </section>

  &export-import;

</section>
