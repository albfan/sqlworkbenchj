/*
 * ProfileEditor.java
 *
 * Created on 1. Juli 2002, 18:34
 */

package workbench.gui.db;

import java.awt.BorderLayout;
import java.util.List;
import javax.swing.JDialog;
import workbench.WbManager;
import workbench.db.ConnectionProfile;

/**
 *
 * @author  thomas.kellerer@inline-skate.com
 */
public class ProfileEditorPanel extends javax.swing.JPanel
{
	private ConnectionEditorPanel connectionEditor;
	
	/** Creates new form ProfileEditor */
	public ProfileEditorPanel()
	{
		initComponents();
		jList1.setSelectedIndex(0);
		jList1.setNextFocusableComponent(connectionEditor);
		this.connectionEditor.setNextFocusableComponent(jList1);
	}
	
	private void initConnectionEditor()
	{
		this.connectionEditor = new ConnectionEditorPanel();
		List drivers = WbManager.getInstance().getConnectionMgr().getDrivers();
		this.connectionEditor.setDrivers(drivers);
	}
	
	private void fillProfiles()
	{
		List profiles = WbManager.getInstance().getConnectionMgr().getProfiles();
		jList1.setListData(profiles.toArray());
		//ConnectionProfile profile = (ConnectionProfile)profiles.get(0);
		//this.connectionEditor.setProfile(profile);
	}
	/** This method is called from within the constructor to
	 * initialize the form.
	 * WARNING: Do NOT modify this code. The content of this method is
	 * always regenerated by the Form Editor.
	 */
  private void initComponents()//GEN-BEGIN:initComponents
  {
    jSplitPane1 = new javax.swing.JSplitPane();
    this.initConnectionEditor();
    jSplitPane1.setRightComponent(this.connectionEditor);
    jList1 = new javax.swing.JList();

    setLayout(new java.awt.BorderLayout());

    setPreferredSize(null);
    jSplitPane1.setDividerLocation(100);
    jSplitPane1.setDividerSize(5);
    this.fillProfiles();
    jList1.addListSelectionListener(new javax.swing.event.ListSelectionListener()
    {
      public void valueChanged(javax.swing.event.ListSelectionEvent evt)
      {
        jList1ValueChanged(evt);
      }
    });

    jSplitPane1.setLeftComponent(jList1);

    add(jSplitPane1, java.awt.BorderLayout.CENTER);

  }//GEN-END:initComponents

	private void jList1ValueChanged(javax.swing.event.ListSelectionEvent evt)//GEN-FIRST:event_jList1ValueChanged
	{//GEN-HEADEREND:event_jList1ValueChanged
		if (evt.getSource() == this.jList1)
		{
			ConnectionProfile newProfile = (ConnectionProfile)this.jList1.getSelectedValue();
			this.connectionEditor.setProfile(newProfile);
		}
	}//GEN-LAST:event_jList1ValueChanged
	
	public ConnectionProfile getSelectedProfile()
	{
		return this.connectionEditor.getProfile();
	}
	
  // Variables declaration - do not modify//GEN-BEGIN:variables
  private javax.swing.JSplitPane jSplitPane1;
  private javax.swing.JList jList1;
  // End of variables declaration//GEN-END:variables
	
	public static void main(String args[])
	{
		JDialog f = new JDialog();
		ProfileEditorPanel p = new ProfileEditorPanel();
		f.getContentPane().add(p);
		f.setSize(400, 200);
		//f.pack();
		f.show();
	}

	
}
